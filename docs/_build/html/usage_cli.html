

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Usage and examples &mdash; neuropredict 0.3 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="author" title="About these documents"
              href="about.html"/>
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="neuropredict 0.3 documentation" href="index.html"/>
        <link rel="next" title="Input formats" href="features.html"/>
        <link rel="prev" title="Installation" href="installation.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> neuropredict
          

          
          </a>

          
            
            
              <div class="version">
                0.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="context.html">Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="context.html#predictive-analysis">Predictive analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage and examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Named Arguments">Named Arguments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Input formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html#interfaces-to-neuroimaging-tools">Interfaces to Neuroimaging tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html#arbitray-feature-input">Arbitray feature input</a></li>
<li class="toctree-l1"><a class="reference internal" href="results.html">Report</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementation.html">Implemenation details</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html">API Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">neuropredict</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Usage and examples</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/usage_cli.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="usage-and-examples">
<h1>Usage and examples<a class="headerlink" href="#usage-and-examples" title="Permalink to this headline">¶</a></h1>
<p>The command line interface for graynet (preferred interface, given its target is HPC) is shown below. Check the bottom of this page for examples.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">neuropredict</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="o">-</span><span class="n">m</span> <span class="n">META_FILE</span> <span class="o">-</span><span class="n">o</span> <span class="n">OUT_DIR</span> <span class="p">[</span><span class="o">-</span><span class="n">f</span> <span class="n">FS_SUBJECT_DIR</span><span class="p">]</span>
                    <span class="p">[</span><span class="o">-</span><span class="n">y</span> <span class="n">PYRADIGM_PATHS</span> <span class="p">[</span><span class="n">PYRADIGM_PATHS</span> <span class="o">...</span><span class="p">]</span> <span class="o">|</span> <span class="o">-</span><span class="n">u</span>
                    <span class="n">USER_FEATURE_PATHS</span> <span class="p">[</span><span class="n">USER_FEATURE_PATHS</span> <span class="o">...</span><span class="p">]</span> <span class="o">|</span> <span class="o">-</span><span class="n">d</span>
                    <span class="n">DATA_MATRIX_PATHS</span> <span class="p">[</span><span class="n">DATA_MATRIX_PATHS</span> <span class="o">...</span><span class="p">]]</span>
                    <span class="p">[</span><span class="o">-</span><span class="n">p</span> <span class="n">POSITIVE_CLASS</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">t</span> <span class="n">TRAIN_PERC</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">n</span> <span class="n">NUM_REP_CV</span><span class="p">]</span>
                    <span class="p">[</span><span class="o">-</span><span class="n">k</span> <span class="n">NUM_FEATURES_TO_SELECT</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">a</span> <span class="n">ATLASID</span><span class="p">]</span>
                    <span class="p">[</span><span class="o">-</span><span class="n">s</span> <span class="p">[</span><span class="n">SUB_GROUPS</span> <span class="p">[</span><span class="n">SUB_GROUPS</span> <span class="o">...</span><span class="p">]]]</span>
</pre></div>
</div>
<div class="section" id="Named Arguments">
<h2>Named Arguments<a class="headerlink" href="#Named Arguments" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd>-m, --meta_file</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Abs path to file containing metadata for subjects to be included for analysis. At the minimum, each subject should have an id per row followed by the class it belongs to.</p>
<p>E.g.
.. parsed-literal:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="n">sub001</span><span class="p">,</span><span class="n">control</span>
<span class="n">sub002</span><span class="p">,</span><span class="n">control</span>
<span class="n">sub003</span><span class="p">,</span><span class="n">disease</span>
<span class="n">sub004</span><span class="p">,</span><span class="n">disease</span>
</pre></div>
</div>
</td></tr>
<tr><td class="option-group">
<kbd>-o, --out_dir</kbd></td>
<td>Output folder to store gathered features &amp; results.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>-f, --fs_subject_dir</kbd></td>
</tr>
<tr><td>&#160;</td><td>Absolute path to <code class="docutils literal"><span class="pre">SUBJECTS_DIR</span></code> containing the finished runs of Freesurfer parcellation (each subject named after its ID in the metadata file). E.g. <code class="docutils literal"><span class="pre">--fs_subject_dir</span> <span class="pre">/project/freesurfer_v5.3</span></code></td></tr>
<tr><td class="option-group" colspan="2">
<kbd>-y, --pyradigm_paths</kbd></td>
</tr>
<tr><td>&#160;</td><td><blockquote class="first last">
<div>Path(s) to pyradigm datasets. Each path is self-contained dataset identifying each sample, its class and features.</div></blockquote>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>-u, --user_feature_paths</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">List of absolute paths to user’s own features.</p>
<p>Format: Each of these folders contains a separate folder for each subject (named after its ID in the metadata file) containing a file called features.txt with one number per line. All the subjects (in a given folder) must have the number of features (#lines in file). Different parent folders (describing one feature set) can have different number of features for each subject, but they must all have the same number of subjects (folders) within them.</p>
<p>Names of each folder is used to annotate the results in visualizations. Hence name them uniquely and meaningfully, keeping in mind these figures will be included in your papers. For example,</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">user_feature_paths</span> <span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">fmri</span><span class="o">/</span> <span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">dti</span><span class="o">/</span> <span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">t1_volumes</span><span class="o">/</span>
</pre></div>
</div>
<p class="last">Only one of <code class="docutils literal"><span class="pre">--pyradigm_paths</span></code>, <code class="docutils literal"><span class="pre">user_feature_paths</span></code> and <code class="docutils literal"><span class="pre">daa_matrix_path</span></code> options can be specified.</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>-d, --data_matrix_paths</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">List of absolute paths to text files containing one matrix of size N x p  (num_samples x num_features).  Each row in the data matrix file must represent data corresponding  to sample in the same row of the meta data file (meta data file and data matrix must be in row-wise correspondence). Name of this file will be used to annotate the results and visualizations.</p>
<p>E.g. <a href="#id1"><span class="problematic" id="id2">``</span></a>–data_matrix_paths /project/fmri.csv /project/dti.csv /project/t1_volumes.csv ``</p>
<p>Only one of <code class="docutils literal"><span class="pre">--pyradigm_paths</span></code>, <code class="docutils literal"><span class="pre">user_feature_paths</span></code> and <code class="docutils literal"><span class="pre">daa_matrix_path</span></code> options can be specified.
File format could be</p>
<blockquote class="last">
<div><ul class="simple">
<li>a simple comma-separated text file (with extension .csv or .txt): which can easily be read back with numpy.loadtxt(filepath, delimiter=’,’) or</li>
<li>a numpy array saved to disk (with extension .npy or .numpy) that can read in with numpy.load(filepath).</li>
</ul>
<p>One could use <code class="docutils literal"><span class="pre">numpy.savetxt(data_array,</span> <span class="pre">delimiter=',')</span></code> or <code class="docutils literal"><span class="pre">numpy.save(data_array)</span></code> to save features. File format is inferred from its extension.</p>
</div></blockquote>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>-p, --positive_class</kbd></td>
</tr>
<tr><td>&#160;</td><td>Name of the positive class (Alzheimers, MCI or Parkinsons etc) to be used in calculation of area under the ROC curve. Applicable only for binary classification experiments. Default: class appearning second in order specified in metadata file.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>-t, --train_perc</kbd></td>
</tr>
<tr><td>&#160;</td><td>Percentage of the smallest class to be reserved for training. Must be in the interval [0.01 0.99].If sample size is sufficiently big, we recommend 0.5.If sample size is small, or class imbalance is high, choose 0.8.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>-n, --num_rep_cv</kbd></td>
</tr>
<tr><td>&#160;</td><td>Number of repetitions of the repeated-holdout cross-validation. The larger the number, the better the estimates will be.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>-k, --num_features_to_select</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Number of features to select as part of feature selection. Options:</p>
<blockquote>
<div><ul class="simple">
<li>‘tenth’</li>
<li>‘sqrt’</li>
<li>‘log2’</li>
<li>‘all’</li>
</ul>
</div></blockquote>
<p class="last">Default: ‘tenth’ of the number of samples in the training set. For example, if your dataset has 90 samples, you chose 50 percent for training (default),  then Y will have 90*.5=45 samples in training set, leading to 5 features to be selected for taining. If you choose a fixed integer, ensure all the feature sets under evaluation have atleast that many features.</p>
</td></tr>
<tr><td class="option-group">
<kbd>-a, --atlas</kbd></td>
<td>Name of the atlas to use for visualization. Default: fsaverage, if available.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>-s, --sub_groups</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">This option allows the user to study different combinations of classes in a multi-class (N&gt;2) dataset. For example, in a dataset with 3 classes CN, FTD and AD, two studies of pair-wise combinations can be studied separately with the following flag <code class="docutils literal"><span class="pre">--sub_groups</span> <span class="pre">CN,FTD</span> <span class="pre">CN,AD</span></code>. This allows the user to focus on few interesting subgroups depending on their dataset/goal.</p>
<p>Format: Different subgroups must be separated by space, and each sub-group must be a comma-separated list of class names defined in the meta data file. Hence it is strongly recommended to use class names without any spaces, commas, hyphens and special characters, and ideally just alphanumeric characters separated by underscores. Any number of subgroups can be specified, but each subgroup must have atleast two distinct classes.</p>
<p class="last">Default: <code class="docutils literal"><span class="pre">'all'</span></code>, leading to inclusion of all available classes in a all-vs-all multi-class setting.</p>
</td></tr>
</tbody>
</table>
</div>
<p>A rough example of usage can be:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>neuropredict -m meta_data.csv -f /work/project/features_dir
</pre></div>
</div>
<p><strong>Example for meta-data</strong></p>
<blockquote>
<div>For example, if you have a dataset with the following three classes: 5 controls, 6 disease_one and 9 other_disease, all you would need to do is produce a meta data file as shown below (specifying a class label for each subject):</div></blockquote>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">3071</span><span class="p">,</span><span class="n">controls</span>
<span class="mi">3069</span><span class="p">,</span><span class="n">controls</span>
<span class="mi">3064</span><span class="p">,</span><span class="n">controls</span>
<span class="mi">3063</span><span class="p">,</span><span class="n">controls</span>
<span class="mi">3057</span><span class="p">,</span><span class="n">controls</span>
<span class="mi">5004</span><span class="p">,</span><span class="n">disease_one</span>
<span class="mi">5074</span><span class="p">,</span><span class="n">disease_one</span>
<span class="mi">5077</span><span class="p">,</span><span class="n">disease_one</span>
<span class="mi">5001</span><span class="p">,</span><span class="n">disease_one</span>
<span class="mi">5002</span><span class="p">,</span><span class="n">disease_one</span>
<span class="mi">5003</span><span class="p">,</span><span class="n">disease_one</span>
<span class="mi">5000</span><span class="p">,</span><span class="n">other_disease</span>
<span class="mi">5006</span><span class="p">,</span><span class="n">other_disease</span>
<span class="mi">5013</span><span class="p">,</span><span class="n">other_disease</span>
<span class="mi">5014</span><span class="p">,</span><span class="n">other_disease</span>
<span class="mi">5016</span><span class="p">,</span><span class="n">other_disease</span>
<span class="mi">5018</span><span class="p">,</span><span class="n">other_disease</span>
<span class="mi">5019</span><span class="p">,</span><span class="n">other_disease</span>
<span class="mi">5021</span><span class="p">,</span><span class="n">other_disease</span>
<span class="mi">5022</span><span class="p">,</span><span class="n">other_disease</span>
</pre></div>
</div>
<p>and <cite>neuropredict</cite> will produce the figures (and numbers in a CSV files) as shown here:</p>
<img alt="_images/composite_flyer.001.png" src="_images/composite_flyer.001.png" />
<p>The higher resolution PDFs are included in the <a class="reference external" href="docs/results_vis">docs</a> folder.</p>
<p>The typical output on the command line would like something like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>neuropredict -y *.MLDataset.pkl -m meta_FourClasses.csv -o ./predictions -t 0.75 -n 250

Requested features for analysis:
get_pyradigm from chebyshev.MLDataset.pkl
get_pyradigm from chebyshev_neg.MLDataset.pkl
get_pyradigm from chi_square.MLDataset.pkl
get_pyradigm from correlate_1.MLDataset.pkl
get_pyradigm from correlate.MLDataset.pkl
get_pyradigm from cosine_1.MLDataset.pkl
get_pyradigm from cosine_2.MLDataset.pkl
get_pyradigm from cosine_alt.MLDataset.pkl
get_pyradigm from cosine.MLDataset.pkl
get_pyradigm from euclidean.MLDataset.pkl
get_pyradigm from fidelity_based.MLDataset.pkl
Different classes in the training set are stratified to match the smallest class!

 CV repetition   0
     feature   0      weight_chebyshev : balanced accuracy: 0.3018
     feature   1  weight_chebyshev_neg : balanced accuracy: 0.2917
     feature   2     weight_chi_square : balanced accuracy: 0.2603
     feature   3    weight_correlate_1 : balanced accuracy: 0.3271
     feature   4      weight_correlate : balanced accuracy: 0.3647
     feature   5       weight_cosine_1 : balanced accuracy: 0.3202
     feature   6       weight_cosine_2 : balanced accuracy: 0.2869
     feature   7     weight_cosine_alt : balanced accuracy: 0.3656
     feature   8         weight_cosine : balanced accuracy: 0.3197
     feature   9      weight_euclidean : balanced accuracy: 0.2579
     feature  10 weight_fidelity_based : balanced accuracy: 0.1190

 CV repetition   1
     feature   0      weight_chebyshev : balanced accuracy: 0.3416
     feature   1  weight_chebyshev_neg : balanced accuracy: 0.3761
     feature   2     weight_chi_square : balanced accuracy: 0.3748
     feature   3    weight_correlate_1 : balanced accuracy: 0.3397
     feature   4      weight_correlate : balanced accuracy: 0.4087
     feature   5       weight_cosine_1 : balanced accuracy: 0.3074
     feature   6       weight_cosine_2 : balanced accuracy: 0.4059
     feature   7     weight_cosine_alt : balanced accuracy: 0.3658
     feature   8         weight_cosine : balanced accuracy: 0.3290
     feature   9      weight_euclidean : balanced accuracy: 0.2662
     feature  10 weight_fidelity_based : balanced accuracy: 0.2090

 CV repetition   2
 . . . .
 . . . .
 . . . .
 CV repetition   n
</pre></div>
</div>
<p>pyradigm here is the python class to ease your ML workflow - check it out here: <a class="reference external" href="http://pyradigm.readthedocs.io">pyradigm.readthedocs.io</a></p>
<p>I hope this user-friendly tool would help you get started on the predictive analysis you’ve been wanting to do for a while.</p>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="features.html" class="btn btn-neutral float-right" title="Input formats" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Pradeep Reddy Raamana.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>